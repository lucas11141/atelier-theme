/*------------------------------------*/
/* Woocommerce Single Page */
/*------------------------------------*/

@mixin swatch() {
}

@mixin focus($type: ring) {
	&:focus {
		@content;

		&::after {
			content: '';
			display: block;
			height: calc(100% + 12px);
			width: calc(100% + 12px);
			border-radius: 13px;
			border: solid 2px $accent;
			position: absolute;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
		}
	}
}

body.single-product {
	overflow: unset;

	> #main {
		padding-bottom: $space-medium;
		overflow: clip;
	}

	.site-main {
		padding-top: 50px !important;

		.woocommerce-breadcrumb {
			display: none;
		}
	}

	.woocommerce-notices-wrapper {
		margin: 0;

		&:not(:empty) {
			margin: 0 auto 40px;
		}
	}

	.split__left {
		position: sticky !important;
		top: 160px;

		.onsale {
			display: none;
		}
	}

	.product-gallery {
		position: relative;

		.main-slider {
			border: solid 1px $linegray;
			border-radius: 25px;

			img {
				width: 100%;
				aspect-ratio: 4/5;
				object-fit: cover;
			}

			.slider__button {
				position: absolute;
				top: 50%;
				translate: 0 -50%;
				z-index: 1;
				cursor: pointer;

				&.--prev {
					left: -40px;
				}

				&.--next {
					right: -40px;
				}
			}

			&:hover {
				.slider__button {
					&.--prev {
						left: 0px;
					}

					&.--next {
						right: 0px;
					}
				}
			}

			// NOTE - Handle layout shift when slider is not initialized yet
			&:not(.swiper-initialized) {
				aspect-ratio: 4/5;
				overflow: hidden;
			}
		}

		.thumbs-list {
			margin-top: 15px;
			display: grid;
			grid-template-columns: repeat(auto-fill, minmax(75px, 1fr));
			gap: 12px;

			li {
				width: 100%;
				border: solid 1px $linegray;
				border-radius: 12px;
				padding: 4px;
				cursor: pointer;
				transition: $transition;

				img {
					width: 100%;
					aspect-ratio: 4/5;
					object-fit: cover;
					border-radius: 8px;
				}

				&:hover,
				&.--active {
					padding: 3px;
					background-color: #f8f8f8;
					border-color: #e0e0e0;
				}

				&.--active {
					border-color: $main;
				}
			}
		}
	}

	.summary {
		// Felder verstecken
		.in-stock,
		.wc-gzd-additional-info-placeholder:empty,
		.wc-gzd-additional-info.price {
			display: none !important;
		}

		// Badge
		.product__badge {
			margin-bottom: 20px;
			padding: 0 16px 0px 13px;
			height: 34px;
			@include fluid-type(10px, 12px);
			gap: 8px;
			position: relative;
			top: unset;
			left: unset;
		}

		// Produkttitel
		.product_title {
			@include font-gooddog;
			padding: 0;
		}
		.badge + .product_title {
			padding-top: 20px;
		}

		// Kurzbeschreibung
		.short__description {
			padding: 4px 0 10px;
			opacity: 0.6;
			@include fluid-type(14px, 16px);
		}

		// Preis
		.price {
			padding-top: 5px;
			padding-bottom: $space-small;
			display: flex;
			flex-direction: row;
			justify-content: flex-start;
			gap: 6px;

			bdi {
				@include font-gooddog;
				@include fluid-type(18px, 24px);
			}

			del bdi {
				@include fluid-type(15px, 16px);
			}
		}

		.out-of-stock,
		.variations_form .out-of-stock {
			@include button;
			background: $lightgray;
			border-color: $linegray;
			color: darkgray !important;
			font-weight: 700 !important;
			cursor: auto;

			&:hover,
			&:active {
				background: inherit;
			}
		}

		.variations_form .out-of-stock {
			white-space: pre-wrap;
			line-height: 1.2em;
		}

		// Variationen
		.variations {
			padding-bottom: 30px;
			width: 100%;
			@include fluid-type(15px, 16px);
			position: relative;

			tbody {
				tr {
					padding-bottom: 30px;
					@include flex('column');
					// position: relative;

					&:last-of-type {
						padding-bottom: 0;
					}

					.label {
						@include fluid-type(14px, 15px);
						font-weight: 800;
						text-transform: uppercase;
						padding-right: 10px;

						span {
							margin-left: 6px;
							font-weight: 500;
							text-transform: none;
						}
					}

					.value {
						margin-top: 12px;
						width: 100%;
						@include flex('row');
						align-items: center;
						column-gap: 8px;

						.variation-selector {
							display: none;
						}

						.tawcvs-swatches {
							width: 100%;
							display: grid;
							gap: 10px;
							grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));

							.swatch-item-wrapper {
								position: relative;

								&:empty {
									display: none;
								}

								.swatch {
									display: flex;
									align-items: center;
									justify-content: center;
									height: 45px;
									min-width: 40px;
									padding-left: 10px;
									padding-right: 10px;
									border-radius: 8px;
									border: solid $linegray 1px;
									position: relative;
									cursor: pointer;
									@include fluid-type(14px, 15px);
									font-weight: 600;

									&:hover {
										background-color: #f8f8f8;
										border-color: #e0e0e0;
									}

									@include focus(ring) {
										background-color: $lightgray;
									}

									&.selected {
										background: $main;
										border-color: transparent;
										color: white;
									}

									&.disabled {
										opacity: 0.2;
									}

									&.swatch-color {
										border-radius: 50%;
										&::after {
											border-radius: 50%;
										}
									}
								}

								.swatch__tooltip {
									display: none;
								}
							}

							@include bp-lower($tablet) {
								grid-template-columns: repeat(auto-fill, minmax(70px, 1fr));

								.swatch-item-wrapper {
									.swatch {
										height: 40px;
									}
								}
							}
						}

						.swatch-color .text {
							display: none;
						}

						select {
							padding: 4px 8px;
							background-color: $lightgray;
							border: solid 2px $linegray;
							border-radius: 8px;
							font-weight: 500;
						}

						.reset_variations {
							display: block !important;
							padding: 4px 0 4px 22px;
							font-weight: 700;
							white-space: nowrap;
							background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%2355D045' stroke-width='3' stroke-linecap='round' stroke-linejoin='round' class='feather feather-trash'%3E%3Cpolyline points='3 6 5 6 21 6'%3E%3C/polyline%3E%3Cpath d='M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2'%3E%3C/path%3E%3C/svg%3E");
							color: $accent;
							background-size: 15px;
							background-repeat: no-repeat;
							background-position: left 43%;
							@include fluid-type(14px, 15px);
							position: absolute;
							top: -4px;
							right: 0px;
							margin: 0px;

							&:hover {
								filter: brightness(0.85);
							}
						}
					}

					.reset_variations {
						margin-top: 20px;
						display: block !important;
					}
				}
			}
		}

		// Add to cart Button
		form.cart:not(.variations_form),
		.woocommerce-variation-add-to-cart {
			@include flex('row');
			align-items: stretch;

			.quantity {
				@include flex('column');
				font-size: 16px;
				min-width: 60px;

				span {
					display: none;
				}

				select {
					height: 100%;
					width: 100%;
					padding: 0 3px 0 12px;
					background-color: transparent;
					border: solid 2px $main;
					font-weight: 700;
					border-radius: 10px;
					background-position-x: calc(100% - 10px);
				}
			}

			button {
				@extend .--color-main;
				flex: auto;
				margin-left: 10px;
			}
		}

		.woocommerce-variation-add-to-cart {
			margin-top: $space-small;

			&.woocommerce-variation-add-to-cart-disabled {
				position: relative;

				* {
					visibility: hidden;
				}

				&::after {
					content: 'Variante w√§hlen';
					padding-top: 12px;
					height: calc(100% + 2px);
					width: 100%;
					background-color: $lightgray;
					border: solid 1px $linegray;
					border-radius: 8px;
					color: $darkgray;
					font-size: 14px;
					text-align: center;
					font-weight: 700;
					text-transform: uppercase;
					position: absolute;
					left: 0;
					top: -1px;
				}
			}
		}

		// germanized lieferzeit
		.delivery-time-info {
			margin: 20px 0 0;
			padding-left: 22px;
			color: $accent;
			font-weight: 600;
			background-image: url(../img/icons/icon_package_green.svg);
			background-repeat: no-repeat;
			background-size: 18px;
			background-position-y: 2px;
			transform: translateX(-1px);
			font-size: 14px;

			& + #ppcp-messages {
				margin-top: 10px;
			}
		}

		// Paypal text
		#ppcp-messages {
			margin-top: 22px;
		}

		.delivery__info {
			display: none;
			padding-top: 25px;
			font-weight: 500;
		}

		// Stichpunkte
		.product__bulletpoints {
			margin-top: 45px;
			@include flex('column');
			align-items: stretch;

			h4 {
				padding: 0;
				margin-bottom: 12px;
			}

			ul {
				padding: 0;

				li {
					padding: 12px 0;
					@include flex('row');
					justify-content: flex-start;
					gap: 10px;
					border-top: solid $linegray 1px;

					&:first-of-type {
						border-top: none;
					}

					img {
						margin-top: 4px;
					}

					span {
						@include fluid-type(14px, 15px);
						line-height: 1.7;
					}
				}
			}
		}

		// Spruch
		.product__quote {
			margin: 45px 0 15px;

			h4 {
				padding: 0 0 16px;
			}

			div {
				padding: 15px 16px 16px;
				background: var(--color-surface-accent);
				border-radius: 12px;
				border: solid 1px var(--color-border-accent);
				position: relative;

				&::before,
				&::after {
					content: '';
					width: 20px;
					aspect-ratio: 42 / 32;
					background-repeat: no-repeat;
					background-size: contain;
					position: absolute;
					opacity: 50%;
				}

				// top right
				&::after {
					background-image: url("data:image/svg+xml,%3Csvg width='43' height='33' viewBox='0 0 43 33' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M9.834 0.928423C3.7 6.36542 0 13.3024 0 20.9434C0 28.4634 4.859 32.7434 10.3 32.7434C12.7164 32.7187 15.0269 31.7478 16.7356 30.039C18.4444 28.3303 19.4153 26.0198 19.44 23.6034C19.44 18.6284 15.969 15.2734 11.573 15.2734C10.786 15.2275 9.99796 15.3457 9.259 15.6204C9.953 12.7284 12.267 9.37242 15.044 6.82742C15.4714 6.44978 15.8155 5.98732 16.0545 5.46946C16.2934 4.9516 16.422 4.38967 16.432 3.81942C16.3893 2.77971 15.9412 1.79803 15.1837 1.08461C14.4262 0.371182 13.4194 -0.0172732 12.379 0.00242256C11.4425 -0.0319348 10.5295 0.300264 9.834 0.928423ZM33.32 0.928423C27.188 6.36542 23.6 13.3024 23.6 20.9434C23.6 28.4634 28.343 32.7434 33.781 32.7434C36.2035 32.7384 38.5254 31.7738 40.2384 30.0608C41.9514 28.3478 42.916 26.026 42.921 23.6034C42.921 18.6284 39.45 15.2734 35.169 15.2734C34.382 15.2275 33.594 15.3457 32.855 15.6204C33.433 12.7284 35.863 9.37242 38.64 6.82742C39.0513 6.44339 39.3772 5.9771 39.5966 5.45887C39.8159 4.94064 39.9237 4.38205 39.913 3.81942C39.8972 2.79202 39.4742 1.8129 38.7369 1.09719C37.9997 0.381485 37.0084 -0.0122756 35.981 0.00242256C35.0128 -0.0107921 34.0708 0.317008 33.32 0.928423Z' fill='%2355D045'/%3E%3C/svg%3E%0A");
					right: 12px;
					top: 0;
					transform: translateY(-50%);
				}

				// bottom left
				&::before {
					background-image: url("data:image/svg+xml,%3Csvg width='42' height='32' viewBox='0 0 42 32' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M31.947 30.718C37.867 25.468 41.442 18.766 41.442 11.393C41.442 4.132 36.75 -0.000997543 31.5 -0.000997543C29.1668 0.0226974 26.9359 0.960075 25.286 2.60998C23.6361 4.25988 22.6987 6.49081 22.675 8.824C22.675 13.624 26.026 16.867 30.275 16.867C31.0348 16.9113 31.7956 16.7972 32.509 16.532C31.839 19.325 29.609 22.564 26.924 25.022C26.5119 25.3861 26.1799 25.832 25.9493 26.3312C25.7186 26.8304 25.5942 27.3721 25.584 27.922C25.6249 28.9255 26.0569 29.8731 26.7877 30.562C27.5185 31.2509 28.4899 31.6263 29.494 31.608C30.3962 31.6411 31.2759 31.3219 31.947 30.718ZM9.271 30.718C15.191 25.468 18.654 18.766 18.654 11.393C18.654 4.132 14.074 -0.000997543 8.824 -0.000997543C6.48493 0.00375938 4.24302 0.935059 2.58904 2.58904C0.935055 4.24302 0.00375748 6.48492 -0.000999451 8.824C-0.000999451 13.624 3.35 16.867 7.483 16.867C8.24283 16.9113 9.00358 16.7972 9.717 16.532C9.158 19.325 6.817 22.564 4.132 25.022C3.73544 25.3923 3.42111 25.8418 3.20939 26.3414C2.99767 26.841 2.89329 27.3795 2.903 27.922C2.91827 28.9147 3.32716 29.8606 4.03977 30.5518C4.75237 31.2431 5.71034 31.623 6.703 31.608C7.63687 31.6216 8.54582 31.3066 9.271 30.718Z' fill='%2355D045'/%3E%3C/svg%3E%0A");
					left: 12px;
					bottom: 0;
					transform: translateY(50%);
				}

				blockquote {
					line-height: 1.6;
					font-size: 14px;
				}
			}
		}

		// Akktordeon
		.accordeon {
			margin-top: $space-small;
		}
	}

	.products-archive__list {
		margin-top: $space-large;

		.related,
		.products {
			margin: auto;
			padding: 0;
			gap: 0;
			border: none;

			.produktslider__header h2,
			h2.headline {
				@include fluid-type(20px, 24px, true);
				margin: auto;
				padding: 0;
			}

			.product {
				width: 100%;
			}
		}
	}

	/*------------------------------------*/
	/* Responsive */
	/*------------------------------------*/
	@include bp-higher($desktop) {
		.product-gallery {
			.main-slider {
				.slider__pagination {
					display: none;
				}
			}
		}
	}

	@include bp-lower($desktop) {
		.split__left {
			position: relative !important;
			top: unset;
		}

		.product-gallery {
			border-bottom: solid 1px $linegray;

			.main-slider {
				border: none;
				border-radius: 0;

				.swiper-slide a {
					pointer-events: none;
				}

				img {
					aspect-ratio: unset;
					height: 130vw;
				}

				.slider__button {
					display: none;
				}

				.slider__pagination {
					padding: 20px $outergap;
					justify-content: start;
					// border-bottom: solid 1px lightgray;
					// border-top: solid 1px lightgray;
					position: absolute;
					bottom: 0;
					left: 0;
					right: 0;
					z-index: 1;
				}
			}

			.thumbs-list {
				display: none;
			}
		}
	}

	@include bp-lower($tablet) {
		.site-main {
			padding-top: 0 !important;
		}

		.woocommerce-notices-wrapper {
			&:not(:empty) {
				margin: 20px auto;
			}
		}

		.shop__split {
			flex-direction: column;
			row-gap: 25px;

			.split__left {
				margin: 0 0 0 -25px;
				width: 100vw;
			}

			.split__right {
				min-width: unset;
				max-width: unset;
				width: 100%;

				.product__badge {
					margin-bottom: 20px;
				}
			}
		}

		.products-archive__list {
			margin-top: $space-medium;

			.related,
			.products {
				h2.headline {
					padding-bottom: 30px;
				}
			}
		}
	}
}

/*------------------------------------*/
/* NOTE - Admin */
/*------------------------------------*/
.admin-edit-link {
	margin-bottom: 20px;
}

// FIXME: Move to right place
.single_variation {
	display: none !important;
}
